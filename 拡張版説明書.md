# 夕食進行ボード - 拡張版 (v2.0)

## 📝 修正・拡張内容（2025年11月8日）

このバージョンでは、以下の機能を大幅に拡張・改善しました!

---

## ✨ 新機能・改善内容

### ✅ 1. 「果菜盛り」「しゃぶしゃぶ」の状態遷移を簡略化

**理由:**
- この2つの料理はキッチンに注文しないため、「注」の状態が不要

**変更内容:**
- 通常の料理: `未 → 待 → 注 → 済 → 未` (4段階)
- 果菜盛り・しゃぶしゃぶ: `未 → 待 → 済 → 未` (3段階)

---

### ✅ 2. プランごとのタグ色分け

**新しいカラーテーマ:**
- **スタンダード**: 青系 (#E3F2FD背景, #2196F3タグ)
- **和牛懐石**: 赤系 (#FFEBEE背景, #F44336タグ)
- **ステーキ**: オレンジ系 (#FFF3E0背景, #FF9800タグ)
- **しゃぶしゃぶ**: 緑系 (#E8F5E9背景, #4CAF50タグ)
- **連泊**: 紫系 (#F3E5F5背景, #9C27B0タグ)

**効果:**
- 各プランが一目で識別できる
- 行全体が淡い色で背景色分け
- 人数タグとプランタグがプランごとの色で表示

---

### ✅ 3. 人数表示を大きく見やすく

**変更内容:**
- フォントサイズ: 12px → **18px**
- フォントウェイト: **太字 (bold)**
- パディング: より余裕のある4px 12px
- プランごとの色付き背景

**表示例:**
```
🔵 5名  スタンダード
```

---

### ✅ 4. 時間グループ表示の改善

**変更前:**
```
18:00 グループ
━━━━━━━━━━
(大きな見出し)
```

**変更後:**
```
18:00
────────────
(控えめで薄い色の見出し + 薄い区切り線)
```

**改善点:**
- フォントサイズ: 16px → **14px**
- 色: #333 → **#999 (薄いグレー)**
- フォントウェイト: bold → **normal (普通)**
- グループ間の区切り線: 薄い色 (#e0e0e0)

---

### ✅ 5. スタッフ選択機能

**本日の設定画面:**
- 出勤スタッフを選択できるセクションを追加
- スタッフ一覧: 真弓、ミン、ボビ、サラミ、パビ、翔平
- カスタムスタッフ名を入力可能

**発注ボード画面:**
- 丸ボタンが「済」になったときに自動的にポップアップ表示
- 提供したスタッフを選択
- 選択したスタッフ名がボタンの下に青文字で表示

**使い方:**
1. 本日の設定で出勤スタッフにチェック
2. 必要に応じてカスタムスタッフ名を入力
3. 発注ボードで「済」ボタンをクリック
4. ポップアップからスタッフを選択
5. スタッフ名が表示される

---

### ✅ 6. ウェルダン選択機能(煮物・ステーキ)

**対象料理:**
- 煮物
- ステーキ

**動作:**
1. 丸ボタンを「待」にクリック
2. 自動的にウェルダン選択ポップアップが表示
3. 「なし」「W×1名」〜「W×5名」を選択
4. 選択した内容がボタンの下に赤文字で表示

**表示例:**
```
[待]
W×3名
```

---

### ✅ 7. 食事スピード選択機能

**配置:**
- 部屋名の下に表示

**選択肢:**
- とてもはやい
- はやい
- 普通 (デフォルト)
- おそい
- とてもおそい

**機能:**
- プルダウンメニューで簡単に変更
- 選択した内容は自動保存
- 部屋ごとに個別設定可能

---

### ✅ 8. アレルギー設定の大幅拡張

**従来の問題点:**
- 1つの部屋に1つのアレルギーしか設定できない
- どの料理が対象か不明確

**新機能:**

#### 本日の設定画面:
- 各部屋に「アレルギー詳細設定」ボタンを追加
- ポップアップでアレルギーを複数登録可能
- 各アレルギーごとに対象の料理を選択

#### 設定できる項目:
- アレルギー名 (例: 甲殻類、小麦、卵 など)
- 対象料理 (複数選択可能):
  - 吸物
  - 果菜盛
  - 蒸物
  - 揚物
  - 煮物
  - 飯
  - 甘味

#### 発注ボード画面:
- アレルギー情報が見やすく表示
- 対象料理も一緒に表示

**表示例:**
```
甲殻類 (果菜盛・揚物)
小麦 (揚物・飯)
```

**使い方:**
1. 本日の設定で「アレルギー詳細設定」をクリック
2. 「+ アレルギーを追加」で新しい項目を追加
3. アレルギー名を入力
4. 対象の料理にチェック
5. 保存

---

## 🎨 デザインの改善

### 丸ボタンの配色
- **未**: 白背景、グレーの枠
- **待**: 黄色背景 (#ffd54f) - 準備完了、待機中
- **注**: 青背景 (#42a5f5) - 注文済み、作業中
- **済**: 緑背景 (#66bb6a) - 提供済み、完了

### ポップアップデザイン
- モダンで使いやすいUI
- 半透明のオーバーレイ
- 大きくて押しやすいボタン
- ホバー時のアニメーション効果

---

## 📂 ファイル構成

```
/
├── index.html         ... 発注ボード画面
├── settings.html      ... 本日の設定画面 (大幅拡張!)
├── app.js            ... メインロジック (全面的に改善!)
├── style.css         ... スタイルシート (新スタイル追加!)
└── README.md         ... このファイル
```

---

## 🚀 使い方

### 1. 初期設定

#### settings.html (本日の設定)を開く

1. **出勤スタッフを選択**
   - 本日出勤するスタッフにチェック
   - 必要に応じてカスタムスタッフ名を入力

2. **部屋ごとの設定**
   - 使用する部屋にチェック
   - 人数を入力
   - プランを選択
   - 夕食開始時間を選択
   - ケーキ・プレートの有無を設定
   - 「アレルギー詳細設定」でアレルギー情報を登録

3. **保存して発注ボードへ**
   - 設定を保存して自動的に発注ボード画面に移動

### 2. 発注ボードでの操作

#### 丸ボタンの操作:
- クリックするたびに状態が変わります
- 通常の料理: `未 → 待 → 注 → 済 → 未`
- 果菜盛り・しゃぶしゃぶ: `未 → 待 → 済 → 未`

#### ウェルダン選択 (煮物・ステーキ):
1. 丸ボタンをクリックして「待」にする
2. 自動的にポップアップが表示
3. ウェルダンの人数を選択
4. 選択内容が表示される

#### スタッフ選択 (全料理):
1. 丸ボタンをクリックして「済」にする
2. 自動的にポップアップが表示
3. 提供したスタッフを選択
4. スタッフ名が表示される

#### 食事スピード変更:
- 各部屋の部屋名下のプルダウンから選択
- 変更は自動的に保存される

#### リセット:
- 「本日データを初期化」ボタンをクリック
- すべての丸ボタンが「未」に戻る

---

## 💾 データ保存について

このアプリは、ブラウザの`localStorage`にデータを保存します:

### 保存される情報:
- `today-settings.v1` - 本日の設定
  - 出勤スタッフ情報
  - 各部屋の設定
  - アレルギー詳細情報
- `dinner.board.v3` - 丸ボタンの状態
  - 各料理の進行状態
  - ウェルダン情報
  - 提供スタッフ情報
- `speed-{時間}-{部屋名}` - 食事スピード設定

### 注意事項:
- ブラウザのキャッシュをクリアすると、保存したデータが消えます
- プライベートモードでは保存されません

---

## 🎯 各機能の動作確認

### ✓ 果菜盛り・しゃぶしゃぶの3段階遷移
- [ ] 「未」→「待」→「済」→「未」の順に変わる
- [ ] 「注」の状態にならない

### ✓ プラン別の色分け
- [ ] スタンダード: 青系
- [ ] 和牛懐石: 赤系
- [ ] ステーキ: オレンジ系
- [ ] しゃぶしゃぶ: 緑系
- [ ] 連泊: 紫系

### ✓ 人数表示
- [ ] 大きく太字で見やすい
- [ ] プランごとの色付き

### ✓ スタッフ選択
- [ ] 本日の設定で選択可能
- [ ] 「済」で自動ポップアップ
- [ ] スタッフ名が表示される

### ✓ ウェルダン選択
- [ ] 煮物・ステーキで「待」にしたとき表示
- [ ] W×◯名の形式で表示

### ✓ 食事スピード
- [ ] プルダウンで選択可能
- [ ] 自動保存される

### ✓ アレルギー拡張
- [ ] 複数のアレルギーを登録可能
- [ ] 対象料理を選択可能
- [ ] 発注ボードに表示される

---

## 🐛 トラブルシューティング

### Q: 丸ボタンの状態がリセットされてしまう
A: ブラウザのキャッシュをクリアしていませんか?設定を確認してください。

### Q: スタッフポップアップが表示されない
A: 本日の設定でスタッフを選択してから、保存してください。

### Q: アレルギー情報が表示されない
A: 「アレルギー詳細設定」で登録後、必ず保存ボタンを押してください。

### Q: 文字化けする
A: ファイルをUTF-8で保存してください。

---

## 📞 今後の追加機能候補

- [ ] キッチン表示画面の本格実装
- [ ] 印刷機能
- [ ] データのエクスポート/インポート
- [ ] 音声通知機能
- [ ] 統計・レポート機能
- [ ] 複数日の履歴管理

---

## 📅 バージョン履歴

### v2.0 (2025年11月8日)
- 果菜盛り・しゃぶしゃぶの3段階遷移
- プラン別の色分け
- 人数表示の拡大
- 時間グループ表示の改善
- スタッフ選択機能
- ウェルダン選択機能
- 食事スピード選択機能
- アレルギー設定の拡張

### v1.1 (2025年11月7日)
- 文字化け修正
- 保存ボタンの整理
- リセット機能の改善

### v1.0 (初版)
- 基本的な進行ボード機能

---

**作成日:** 2025年11月8日  
**バージョン:** 2.0  
**制作:** Claude + ユーザー様の素晴らしいアイデア ✨
